


<script>
	$(document).ready(function(){
		Highcharts.setOptions({chart: { width: 800, height: 450}});
	});
</script>


<style>
#lbFig30container
{
	display:none;
}
</style>

<DIV id="lbFig30container"></DIV>

<script>
$(document).ready(function () {
	$('#lbFig30container').css('display', 'block');

	try {
		var errorBars = [];
		
		var drawErrorBars = function () {
			var chart = this;

			for (var k = 0; k < errorBars.length; k++) {
				errorBars[k].destroy();
			}

			errorBars = [];

			var barWidth = 1;
			var plotLeft = chart.plotLeft;
			var plotTop = chart.plotTop;
			var capHeight = 2;
 
			for (var i = 0; i < chart.series.length; i++) {
				if (chart.series[i].type == 'column' && chart.series[i].visible) {
					barWidth += chart.series[i].data[0].graphic.width;
					barWidth += chart.options.plotOptions.column.pointPadding * barWidth;
				}
			}

			for (var i = 0; i < chart.series.length; i++) {
				if (chart.series[i].type == 'scatter') {				
					for (var j = 0; j < chart.series[i].data.length; j++) {
						var dataX = chart.series[i].data[j].plotX + plotLeft;
						var dataY = chart.series[i].data[j].plotY + plotTop;
						var leftX = dataX - (barWidth / 2);
						var rightX = dataX + (barWidth / 2);
						errorBars.push(chart.renderer.path(['M', leftX, dataY - capHeight,
							'L', leftX, dataY + capHeight,
							'M', leftX, dataY,
							'L', rightX, dataY,
							'M', rightX, dataY - capHeight,
							'L', rightX, dataY + capHeight]).attr({
							'stroke-width': 2,
							stroke: 'black',
								'stroke-linecap': 'butt',
							zIndex: 3							
						}).add());
					}
				}
			}
		};
		
		var chartOptions = {
			chart: {
				renderTo: 'lbFig30container',
				lineUpAxisZeros: false,
				events: {
					redraw: drawErrorBars,
					load: drawErrorBars
				}
			},
			lang: {
				exportButtonTitle: 'Export Data or Image'
			},
			credits: {
				enabled: true,
				text: 'Source: Short-Term Energy Outlook, January 2017',
				href: null,
				style: {
					cursor: 'default'
				},
				position: {
					align: 'left',
					verticalAlign: 'bottom',
					x: 10,
					y: -5
				}
			},
			title: {
				text: 'U.S. Winter Heating Degree Days'
			},
			xAxis: {
				title: {
					text: ''
				},
				type: 'category',
				labels: {
					style: {
						whiteSpace: 'nowrap',
						wordWrap: 'normal'
					},
					y: 20
				}
				,
				categories: [
					'October', 'November', 'December', 'January', 'February', 'March' 
				],				
				tickmarkPlacement: 'on',
				startOnTick: false,
				endOnTick: false,
				showFirstLabel: true,
				tickInterval: 1
			},
			yAxis: [{
				title: {
					text: 'heating degree-days',
					align: 'above',
					y: -10,
					style: {
						fontWeight: 'normal'
					}
				},
				min: 0,
				max: 1000,
				tickInterval: 200,
				labels: {
					formatter: function () {
						return formatNumber(this.value, 0, true, ('' == 'percent'));
					}
				},
				opposite: false
			}],
			tooltip: {
				formatter: function () {
					var xLabel = this.x;
					var yLabel = formatNumber(this.y, 0, true, false);								

					return '<b>' + xLabel + '</b><br/>' + this.series.name + ' : <b>' + yLabel + '</b>';
				}
			},
			legend: {
				layout: 'vertical',
				align: 'center',
				verticalAlign: 'bottom',
				margin: 30,
				width: 400,
				borderWidth: 0
			},
			series: [
						
				{
					name: '2014/15',
					type: 'column',
					yAxis: 0,
					zIndex: 4,
					color: Highcharts.eia_green,
					data: [
						
							['October',220]
							, 
							['November',614]
							, 
							['December',705]
							, 
							['January',890]
							, 
							['February',867]
							, 
							['March',584]
							
					]
				},
							
				{
					name: '2015/16',
					type: 'column',
					yAxis: 0,
					zIndex: 3,
					color: Highcharts.eia_tan,
					data: [
						
							['October',227]
							, 
							['November',445]
							, 
							['December',581]
							, 
							['January',870]
							, 
							['February',627]
							, 
							['March',449]
							
					]
				},
							
				{
					name: '2016/17',
					type: 'column',
					yAxis: 0,
					zIndex: 2,
					color: Highcharts.eia_blue,
					data: [
						
							['October',197]
							, 
							['November',416]
							, 
							['December',757]
							, 
							['January',850]
							, 
							['February',682]
							, 
							['March',551]
							
					]
				},
							
				{
					name: '2017/18',
					type: 'column',
					yAxis: 0,
					zIndex: 1,
					color: Highcharts.eia_yellow,
					data: [
						
							['October',243]
							, 
							['November',485]
							, 
							['December',767]
							, 
							['January',844]
							, 
							['February',680]
							, 
							['March',556]
							
					]
				},
				
				{
					name: '2007 - 2016 Avg',
					type: 'scatter',
					yAxis: 0,
					marker: {
						enabled: false
					},
					zIndex: 5,
					showInLegend: false,
					color: '#000',
					fillColor: '#000',
					data: [
							
								['October',257]
								, 
								['November',515]
								, 
								['December',762]
								, 
								['January',888]
								, 
								['February',747]
								, 
								['March',557]
								
					]
				}
			
			],
			captions: {
				items: [{
					text: 'Note: EIA calculations based on National Oceanic and Atmospheric Administration (NOAA) data. Horizontal lines indicate each month\'s prior 10-year average (Oct 2006 - Mar 2016). Projections reflect NOAA\'s 14-16 month outlook.'
				}, {
					text: ''
				}]
			}
		};
		var chart = new Highcharts.Chart(chartOptions);
	} catch (err) {
		throw (err);
	}
});
</script>
